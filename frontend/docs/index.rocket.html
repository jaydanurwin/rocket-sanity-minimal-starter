<script type="module" server>
/* START - Rocket auto generated - do not touch */
export const sourceRelativeFilePath = 'index.rocket.html';
/* END - Rocket auto generated - do not touch */

import {client} from '../src/lib/sanityClient.js';
const query = `*[_type == 'post']{categories[]->{slug, title}, ...} | order(publishedAt desc)`
let data = await client.fetch(query).catch(err => console.log(err));

const posts = data.map((post) => html`
  <li><a href=${`/posts/${post.slug.current}`}>
    ${post.title}
    </a></li>
  `);
</script>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>Rocket</title>
  </head>
  <body>
    <h1>Rocket + Sanity</h1>
    <h2>Posts (⚠️ links don't work yet)</h2>
    <ul>
      ${posts}
    </ul>
  </body>
</html>
